<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chatbot Implementation - Discovery Questionnaire</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        padding: 20px;
        color: #333;
      }

      .container {
        max-width: 900px;
        margin: 0 auto;
        background: white;
        border-radius: 15px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        overflow: hidden;
      }

      .header {
        background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        color: white;
        padding: 40px;
        text-align: center;
      }

      .header h1 {
        font-size: 2.5em;
        margin-bottom: 10px;
      }

      .header p {
        font-size: 1.2em;
        opacity: 0.9;
      }

      .form-section {
        padding: 40px;
      }

      .question {
        margin-bottom: 30px;
      }

      .question-label {
        font-size: 1.1em;
        font-weight: 600;
        color: #333;
        margin-bottom: 10px;
        display: block;
      }

      .text-input,
      textarea {
        width: 100%;
        padding: 12px 15px;
        font-size: 1em;
        border: 2px solid #ddd;
        border-radius: 8px;
        font-family: inherit;
        transition: border-color 0.3s ease;
      }

      .text-input:focus,
      textarea:focus {
        outline: none;
        border-color: #11998e;
      }

      textarea {
        min-height: 100px;
        resize: vertical;
      }

      .submit-button {
        background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        color: white;
        padding: 20px 50px;
        font-size: 1.3em;
        font-weight: bold;
        border: none;
        border-radius: 50px;
        cursor: pointer;
        margin: 40px auto;
        display: block;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }

      .submit-button:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
      }

      .submit-button:disabled {
        opacity: 0.7;
        cursor: not-allowed;
      }

      .message {
        padding: 20px;
        margin: 20px 40px;
        border-radius: 10px;
        font-size: 1.1em;
        text-align: center;
      }

      .success-message {
        background: #d4edda;
        color: #155724;
        border: 2px solid #c3e6cb;
      }

      .error-message {
        background: #f8d7da;
        color: #721c24;
        border: 2px solid #f5c6cb;
      }

      .footer {
        background: #f8f9fa;
        padding: 30px;
        text-align: center;
        color: #666;
        border-top: 2px solid #eee;
      }

      .back-link {
        display: inline-block;
        margin-bottom: 20px;
        color: #11998e;
        text-decoration: none;
        font-weight: 600;
      }

      .back-link:hover {
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>ü§ñ Chatbot Implementation</h1>
        <p>Discovery Questionnaire</p>
      </div>

      <div class="form-section">
        <a href="/" class="back-link">‚Üê Back to Home</a>

        <form id="chatbotForm">
          <div class="question">
            <label class="question-label" for="mainPurpose">1. What is the main purpose of this chatbot? *</label>
            <textarea name="mainPurpose" id="mainPurpose" placeholder="Describe the main purpose..." required></textarea>
          </div>

          <div class="question">
            <label class="question-label" for="platform">2. What platform will this be deployed on? *</label>
            <textarea name="platform" id="platform" placeholder="e.g., Website, Mobile app, WhatsApp, Facebook Messenger..." required></textarea>
          </div>

          <div class="question">
            <label class="question-label" for="conversationVolume">3. Expected conversation volume: *</label>
            <input type="text" name="conversationVolume" id="conversationVolume" class="text-input" placeholder="Approximately ___ conversations per day/month" required />
          </div>

          <div class="question">
            <label class="question-label" for="primaryAudience">4. Who is the primary audience? *</label>
            <input type="text" name="primaryAudience" id="primaryAudience" class="text-input" placeholder="e.g., Customers (B2C), Businesses (B2B), Internal employees..." required />
          </div>

          <div class="question">
            <label class="question-label" for="conversationComplexity">5. How complex is the conversation? *</label>
            <textarea name="conversationComplexity" id="conversationComplexity" placeholder="Simple, Moderate, or Complex? Describe..." required></textarea>
          </div>

          <div class="question">
            <label class="question-label" for="hasScript">6. Do you have a conversation flow or script already? *</label>
            <input type="text" name="hasScript" id="hasScript" class="text-input" placeholder="Yes/No - If yes, describe briefly" required />
          </div>

          <div class="question">
            <label class="question-label" for="languages">7. What languages does the chatbot need to support? *</label>
            <input type="text" name="languages" id="languages" class="text-input" placeholder="e.g., English, Spanish, French..." required />
          </div>

          <div class="question">
            <label class="question-label" for="tone">8. What tone should the chatbot have? *</label>
            <input type="text" name="tone" id="tone" class="text-input" placeholder="e.g., Friendly, Professional, Casual, Formal..." required />
          </div>

          <div class="question">
            <label class="question-label" for="conversationStyle">9. Conversation style: *</label>
            <input type="text" name="conversationStyle" id="conversationStyle" class="text-input" placeholder="e.g., Natural/AI-driven, Structured menu-based, Hybrid..." required />
          </div>

          <div class="question">
            <label class="question-label" for="informationToCollect">10. What information do you need to collect from users? *</label>
            <textarea name="informationToCollect" id="informationToCollect" placeholder="e.g., Name, email, order number, issue description..." required></textarea>
          </div>

          <div class="question">
            <label class="question-label" for="informationToProvide">11. What information will the chatbot provide? *</label>
            <textarea name="informationToProvide" id="informationToProvide" placeholder="e.g., Product info, order status, FAQs, pricing..." required></textarea>
          </div>

          <div class="question">
            <label class="question-label" for="actions">12. What actions should the chatbot be able to perform? *</label>
            <textarea name="actions" id="actions" placeholder="e.g., Schedule appointments, process orders, create tickets..." required></textarea>
          </div>

          <div class="question">
            <label class="question-label" for="systemAccess">13. Does the chatbot need to access existing systems? *</label>
            <textarea name="systemAccess" id="systemAccess" placeholder="e.g., CRM, Database, Booking system, Order management..." required></textarea>
          </div>

          <div class="question">
            <label class="question-label" for="userHistory">14. Should it remember user history? *</label>
            <input type="text" name="userHistory" id="userHistory" class="text-input" placeholder="Yes/No - If yes, what should it remember?" required />
          </div>

          <div class="question">
            <label class="question-label" for="knowledgeBase">15. Is there a knowledge base or FAQ it should use? *</label>
            <textarea name="knowledgeBase" id="knowledgeBase" placeholder="Describe the knowledge sources..." required></textarea>
          </div>

          <div class="question">
            <label class="question-label" for="handleUnknown">16. How should it handle unknown questions? *</label>
            <textarea name="handleUnknown" id="handleUnknown" placeholder="e.g., Apologize and offer alternatives, Escalate to human, Ask clarifying questions..." required></textarea>
          </div>

          <div class="question">
            <label class="question-label" for="escalateToHuman">17. When should it escalate to a human? *</label>
            <textarea name="escalateToHuman" id="escalateToHuman" placeholder="e.g., Complex requests, complaints, high-value transactions..." required></textarea>
          </div>

          <div class="question">
            <label class="question-label" for="whenToEscalate">18. Escalation triggers: *</label>
            <textarea name="whenToEscalate" id="whenToEscalate" placeholder="Specific scenarios that require human intervention..." required></textarea>
          </div>

          <div class="question">
            <label class="question-label" for="handoffMethod">19. How should handoff to humans work? *</label>
            <textarea name="handoffMethod" id="handoffMethod" placeholder="e.g., Live chat, Create ticket, Email support team..." required></textarea>
          </div>

          <div class="question">
            <label class="question-label" for="visualStyle">20. Visual style preferences: *</label>
            <textarea name="visualStyle" id="visualStyle" placeholder="Describe desired look and feel, colors, branding..." required></textarea>
          </div>

          <div class="question">
            <label class="question-label" for="widgetFeatures">21. Chat widget features needed: *</label>
            <textarea name="widgetFeatures" id="widgetFeatures" placeholder="e.g., Minimize/maximize, Typing indicator, File uploads, Emojis..." required></textarea>
          </div>

          <div class="question">
            <label class="question-label" for="botAvatar">22. Bot avatar/name: *</label>
            <input type="text" name="botAvatar" id="botAvatar" class="text-input" placeholder="e.g., Bot name: Alex, Avatar: Robot icon" required />
          </div>

          <div class="question">
            <label class="question-label" for="existingPlatform">23. Any existing chat platform? *</label>
            <input type="text" name="existingPlatform" id="existingPlatform" class="text-input" placeholder="e.g., Intercom, Zendesk, Custom solution, None" required />
          </div>

          <div class="question">
            <label class="question-label" for="hosting">24. Hosting preferences: *</label>
            <input type="text" name="hosting" id="hosting" class="text-input" placeholder="e.g., Cloud-based, On-premise, No preference" required />
          </div>

          <div class="question">
            <label class="question-label" for="techPreferences">25. Any technical preferences or requirements? *</label>
            <textarea name="techPreferences" id="techPreferences" placeholder="e.g., Specific AI platform, programming language, APIs..." required></textarea>
          </div>

          <div class="question">
            <label class="question-label" for="regulations">26. Compliance/regulatory requirements: *</label>
            <textarea name="regulations" id="regulations" placeholder="e.g., GDPR, HIPAA, PCI-DSS, Industry-specific..." required></textarea>
          </div>

          <div class="question">
            <label class="question-label" for="conversationRecording">27. Should conversations be recorded/stored? *</label>
            <input type="text" name="conversationRecording" id="conversationRecording" class="text-input" placeholder="Yes/No - If yes, for how long?" required />
          </div>

          <div class="question">
            <label class="question-label" for="dataPrivacy">28. Data privacy considerations: *</label>
            <textarea name="dataPrivacy" id="dataPrivacy" placeholder="Describe how user data should be handled..." required></textarea>
          </div>

          <div class="question">
            <label class="question-label" for="timeline">29. Project timeline: *</label>
            <input type="text" name="timeline" id="timeline" class="text-input" placeholder="e.g., 3 months, ASAP, Flexible" required />
          </div>

          <div class="question">
            <label class="question-label" for="budget">30. Budget range: *</label>
            <input type="text" name="budget" id="budget" class="text-input" placeholder="e.g., $10k-$50k, $50k-$100k, Enterprise" required />
          </div>

          <div class="question">
            <label class="question-label" for="testingApproach">31. Testing approach: *</label>
            <textarea name="testingApproach" id="testingApproach" placeholder="Describe how you'd like to test the chatbot..." required></textarea>
          </div>

          <div class="question">
            <label class="question-label" for="successMetrics">32. How will you measure success? *</label>
            <textarea name="successMetrics" id="successMetrics" placeholder="e.g., Response time, Customer satisfaction, Containment rate..." required></textarea>
          </div>

          <div class="question">
            <label class="question-label" for="analyticsNeeded">33. Analytics/reporting needs: *</label>
            <textarea name="analyticsNeeded" id="analyticsNeeded" placeholder="What metrics and reports do you need?" required></textarea>
          </div>

          <button type="submit" class="submit-button" id="submitBtn">
            Submit Questionnaire
          </button>
        </form>

        <div id="successMessage" class="message success-message" style="display: none"></div>
        <div id="errorMessage" class="message error-message" style="display: none"></div>
      </div>

      <div class="footer">
        <p><strong>Chatbot Implementation Discovery</strong></p>
        <p>Your responses will be securely stored and reviewed by our team.</p>
      </div>
    </div>

    <script>
      document
        .getElementById("chatbotForm")
        .addEventListener("submit", async function (e) {
          e.preventDefault();

          const submitBtn = document.getElementById("submitBtn");
          const successMsg = document.getElementById("successMessage");
          const errorMsg = document.getElementById("errorMessage");

          // Hide messages
          successMsg.style.display = "none";
          errorMsg.style.display = "none";

          // Disable button
          submitBtn.disabled = true;
          submitBtn.textContent = "Submitting...";

          try {
            // Collect form data
            const formData = new FormData(this);
            const data = {};

            // Convert FormData to object
            for (let [key, value] of formData.entries()) {
              data[key] = value;
            }

            console.log("Submitting data:", data);

            // Submit to API
            const response = await fetch("/api/submit-chatbot", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify(data),
            });

            const result = await response.json();

            if (response.ok) {
              successMsg.textContent = "‚úÖ " + result.message;
              successMsg.style.display = "block";
              successMsg.scrollIntoView({ behavior: "smooth", block: "center" });
              this.reset();
            } else {
              throw new Error(result.error || "Failed to submit form");
            }
          } catch (error) {
            console.error("Error:", error);
            errorMsg.textContent =
              "‚ùå Error: " + error.message + ". Please try again.";
            errorMsg.style.display = "block";
            errorMsg.scrollIntoView({ behavior: "smooth", block: "center" });
          } finally {
            submitBtn.disabled = false;
            submitBtn.textContent = "Submit Questionnaire";
          }
        });
    </script>
  </body>
</html>

